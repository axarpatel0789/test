<div class="container mt-5">
  <h2>User List</h2>
  
  <!-- Error Statistics from JSON File -->
  <div class="alert alert-secondary mb-3">
    <strong>Error Statistics (from errors.json):</strong>
    <br>
    Total Errors: <span class="badge bg-danger">{{ errorStats.total }}</span>
    <br>
    Last Updated: {{ errorStats.lastUpdated }}
  </div>
  
  <div class="mb-3">
    <h5 class="mb-2">API Errors:</h5>
    <button class="btn btn-danger me-2" (click)="triggerError()">Trigger API Error</button>
    
    <h5 class="mt-3 mb-2">Frontend Errors:</h5>
    <button class="btn btn-danger me-2" (click)="triggerFrontendError()">Trigger Null Reference Error</button>
    <button class="btn btn-danger me-2" (click)="triggerCalculationError()">Trigger Array Error</button>
    <button class="btn btn-danger me-2" (click)="triggerLogicError()">Trigger Logic Error</button>
    
    <h5 class="mt-3 mb-2">Utilities:</h5>
    <button class="btn btn-info me-2" (click)="refreshErrorLogs()">Refresh Error Logs</button>
    <button class="btn btn-success me-2" (click)="downloadErrorsAsJson()">Download Errors as JSON</button>
    <button class="btn btn-warning" (click)="clearErrorLogs()">Clear Error Logs</button>
  </div>

  <table class="table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of users">
        <td>{{ user.id }}</td>
        <td>{{ user.name }}</td>
        <td>{{ user.email }}</td>
      </tr>
    </tbody>
  </table>

  <div class="mt-5">
    <h3>Error Logs ({{ errorLogs.length }})</h3>
    <div *ngIf="errorLogs.length === 0" class="alert alert-info">
      No errors logged yet.
    </div>
    <div *ngFor="let error of errorLogs" class="alert alert-danger">
      <strong>{{ error.source }}</strong> - {{ error.message }}
      <br>
      <small class="text-muted">{{ error.time }}</small>
      <pre *ngIf="error.error" class="mt-2 bg-light p-2">{{ error.error | json }}</pre>
    </div>
  </div>
</div>
